!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t,r,n,i,a,o){try{var c=e[a](o),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function c(e){r(o,i,a,c,s,"next",e)}function s(e){r(o,i,a,c,s,"throw",e)}c(void 0)})}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{GV60:function(t,r,a){"use strict";a.r(r),a.d(r,"amplify_s3_album",function(){return j});var o,c=a("bRKV"),s=a("Nt7R"),u=a("HzrR"),l=a("JIIv"),m=a("H8iN"),f=a("vbTL"),p=a("/vcS"),y=a("l1VB"),d=a("Y0ez"),b=new Uint8Array(16);function h(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(b)}var v=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function g(e){return"string"==typeof e&&v.test(e)}for(var k=[],w=0;w<256;++w)k.push((w+256).toString(16).substr(1));function x(e,t,r){var n=(e=e||{}).random||(e.rng||h)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(k[e[t+0]]+k[e[t+1]]+k[e[t+2]]+k[e[t+3]]+"-"+k[e[t+4]]+k[e[t+5]]+"-"+k[e[t+6]]+k[e[t+7]]+"-"+k[e[t+8]]+k[e[t+9]]+"-"+k[e[t+10]]+k[e[t+11]]+k[e[t+12]]+k[e[t+13]]+k[e[t+14]]+k[e[t+15]]).toLowerCase();if(!g(r))throw TypeError("Stringified UUID is invalid");return r}(n)}var I=new s.a("S3Album"),j=function(){function t(r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object(c.k)(this,r),this.contentType="binary/octet-stream",this.level=m.a.Public,this.picker=!0,this.pickerText=f.a.PICKER_TEXT,this.albumItems=[],this.imgArr={},this.list=n(regeneratorRuntime.mark(function e(){var t,r,n,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.path,r=void 0===t?"":t,n=i.level,a=i.track,o=i.identityId,I.debug("Album path: "+r),y.a&&"function"==typeof y.a.list){e.next=3;break}throw new Error(p.n);case 3:return e.prev=3,e.next=6,y.a.list(r,{level:n,track:a,identityId:o});case 6:c=e.sent,i.marshal(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),I.warn(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])})),this.marshal=function(e){e.forEach(function(e){var t=e.key.toLowerCase().split(".")[1];d.d.has(t)&&(!e.contentType||e.contentType&&"binary/octet-stream"===e.contentType)&&(e.contentType=i.getContentType(e))});var t=e.filter(function(e){return e.contentType&&e.contentType.startsWith("image/")}),r=i.filter?i.filter(t):t;r=i.sort?i.sort(r):r,i.albumItems=r,I.debug("album items",i.albumItems),i.constructImgArray(i.albumItems)},this.constructImgArray=function(e){e.map(function(e){i.imgArr[""+e.key]=e.key})},this.handlePick=function(){var t=n(regeneratorRuntime.mark(function t(r){var n,a,o,c,s,u,l,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.target.files[0],a=i.path,o=void 0===a?"":a,c=i.level,s=i.track,u=i.fileToKey,l=o+Object(d.b)(n,u),t.prev=1,t.next=4,Object(d.e)(l,n,c,s,n.type,I);case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(1),I.error(t.t0),new Error(t.t0);case 9:Object.keys(i.imgArr).includes(l)?(i.albumItems=e(i.albumItems),i.imgArr[l]="".concat(l,"-").concat(x())):(m=[].concat(e(i.albumItems),e(i.filter?i.filter([{key:l}]):[{key:l}])),i.albumItems=i.sort?i.sort(m):m);case 10:case"end":return t.stop()}},t,null,[[1,6]])}));return function(e){return t.apply(this,arguments)}}()}var r,a,o;return r=t,(a=[{key:"getContentType",value:function(e){return Object(u.c)(e.key,"image/*")}},{key:"componentWillLoad",value:function(){this.list()}},{key:"render",value:function(){var e=this;return Object(c.i)("div",null,Object(c.i)("div",{class:"album-container"},Object(c.i)("div",{class:"grid-row"},this.albumItems.map(function(t){return Object(c.i)("div",{class:"grid-item",key:"key-"+t.key},Object(c.i)("amplify-s3-image",{key:e.imgArr[t.key],imgKey:t.key,level:e.level,path:e.path,identityId:e.identityId,track:e.track,handleOnError:e.handleOnError,handleOnLoad:e.handleOnLoad}),Object(c.i)("span",{class:"img-overlay"}))}))),this.picker&&Object(c.i)("amplify-picker",{pickerText:l.a.get(this.pickerText),inputHandler:function(t){return e.handlePick(t)},acceptValue:"image/*"}))}}])&&i(r.prototype,a),o&&i(r,o),t}();j.style=":host{--overlay-bg-color:rgba(0, 0, 0, 0.15)}.album-container{-webkit-box-sizing:border-box;box-sizing:border-box;max-width:100%;margin:0 auto;padding:0 2rem}.grid-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:-1rem -1rem;padding-bottom:3rem}.grid-item{position:relative;-ms-flex:1 0 22rem;flex:1 0 22rem;-ms-flex-positive:1;flex-grow:1;margin:1rem;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}amplify-s3-image{--width:22rem;--height:20rem;border-radius:5px;-o-object-fit:cover;object-fit:cover}.img-overlay{display:none;width:100%;height:21rem;position:absolute;top:0;left:0;background-color:var(--overlay-bg-color)}.grid-item:hover .img-overlay{display:block}"}}])}();