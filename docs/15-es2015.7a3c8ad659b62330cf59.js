(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{HaBs:function(t,a,e){"use strict";e.r(a),e.d(a,"amplify_authenticator",function(){return m});var i=e("hKmi"),n=e("Nt7R"),s=e("Qycn"),r=e("s1tr"),o=e("TESy"),h=e("v4IS"),u=(e("sPRy"),e("/vcS")),c=e("Y85I"),l=e("R3Op");const g={[r.a.SignIn]:"sign-in",[r.a.ConfirmSignIn]:"confirm-sign-in",[r.a.SignUp]:"sign-up",[r.a.ConfirmSignUp]:"confirm-sign-up",[r.a.ForgotPassword]:"forgot-password",[r.a.ResetPassword]:"require-new-password",[r.a.VerifyContact]:"verify-contact",[r.a.TOTPSetup]:"totp-setup",[r.a.Loading]:"loading"},d=new n.a("Authenticator"),m=class{constructor(t){Object(i.k)(this,t),this.initialAuthState=r.a.SignIn,this.handleAuthStateChange=()=>{},this.hideToast=!1,this.authState=r.a.Loading,this.toastMessage="",this.handleExternalAuthEvent=({payload:t})=>{switch(t.event){case"cognitoHostedUI":case"signIn":Object(l.a)(t.data,c.d);break;case"cognitoHostedUI_failure":case"parsingUrl_failure":case"signOut":case"customGreetingSignOut":return Object(c.d)(this.initialAuthState)}},this.handleToastEvent=({payload:t})=>{switch(t.event){case u.h:t.message&&(this.toastMessage=t.message)}}}async componentWillLoad(){Object(c.h)((t,a)=>{this.onAuthStateChange(t,a),this.toastMessage=""}),this.hideToast||s.a.listen(u.i,this.handleToastEvent),s.a.listen(u.a,this.handleExternalAuthEvent),Object(o.j)("amplify-authenticator");const t=localStorage.getItem(u.f);localStorage.removeItem(u.f),"true"!==t&&await this.checkUser()}async checkUser(){if(!h.a||"function"!=typeof h.a.currentAuthenticatedUser)throw new Error(u.d);return h.a.currentAuthenticatedUser().then(t=>{Object(c.d)(r.a.SignedIn,t)}).catch(async()=>{let t=null;try{t=localStorage.getItem(u.l)}catch(a){d.debug("Failed to get the auth state from local storage",a)}try{t===r.a.SignedIn&&await h.a.signOut(),Object(c.d)(this.initialAuthState)}catch(a){d.debug("Failed to sign out",a)}})}async onAuthStateChange(t,a){if(void 0===t)return d.error("nextAuthState cannot be undefined");d.info("Inside onAuthStateChange Method current authState:",this.authState),this.authState=t===r.a.SignedOut?this.initialAuthState:t,this.authData=a,this.authData&&d.log("Auth Data was set:",this.authData),this.authState===t&&(this.handleAuthStateChange(this.authState,this.authData),d.info("authState has been updated to "+this.authState))}getAuthComponent(t){switch(t){case r.a.SignIn:return Object(i.i)("amplify-sign-in",{federated:this.federated,usernameAlias:this.usernameAlias});case r.a.ConfirmSignIn:return Object(i.i)("amplify-confirm-sign-in",{user:this.authData});case r.a.SignUp:return Object(i.i)("amplify-sign-up",{usernameAlias:this.usernameAlias});case r.a.ConfirmSignUp:return Object(i.i)("amplify-confirm-sign-up",{user:this.authData,usernameAlias:this.usernameAlias});case r.a.ForgotPassword:return Object(i.i)("amplify-forgot-password",{usernameAlias:this.usernameAlias});case r.a.ResetPassword:return Object(i.i)("amplify-require-new-password",{user:this.authData});case r.a.VerifyContact:return Object(i.i)("amplify-verify-contact",{user:this.authData});case r.a.TOTPSetup:return Object(i.i)("amplify-totp-setup",{user:this.authData});case r.a.Loading:return Object(i.i)("div",null,"Loading...");default:throw new Error("Unhandled auth state: "+t)}}getSlotWithAuthComponent(t){const a=this.getAuthComponent(t),e=g[t],n=null===this.el.querySelector(`[slot="${e}"]`);return Object(i.i)("slot",{name:e},n&&a)}componentWillUnload(){return s.a.remove(u.a,this.handleExternalAuthEvent),this.hideToast||s.a.remove(u.i,this.handleToastEvent),c.h}render(){return Object(i.i)(i.b,null,!this.hideToast&&this.toastMessage&&Object(i.i)("amplify-toast",{message:this.toastMessage,handleClose:()=>{this.toastMessage=""},"data-test":"authenticator-error"}),this.authState===r.a.SignedIn?[Object(i.i)("slot",{name:"greetings"}),Object(i.i)("slot",null)]:Object(i.i)("div",{class:"auth-container"},this.getSlotWithAuthComponent(this.authState)))}get el(){return Object(i.h)(this)}};m.style=":host{--background-color:var(--amplify-background-color);--width:28.75rem;--min-width:20rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;--box-shadow:1px 1px 4px 0 rgba(0, 0, 0, 0.15);--border-radius:6px;--padding:35px 40px;--margin-bottom:20px;--container-height:100vh;--container-display:flex;--container-justify:center;--container-align:center}.auth-container{display:var(--container-display);-ms-flex-pack:var(--container-justify);justify-content:var(--container-justify);-ms-flex-align:var(--container-align);align-items:var(--container-align);min-height:var(--container-height)}"}}]);